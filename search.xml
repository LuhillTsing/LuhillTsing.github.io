<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>AboutMe</title>
    <url>//about/me/</url>
    <content><![CDATA[<h2 id="卿禄峰"><a href="#卿禄峰" class="headerlink" title="卿禄峰"></a>卿禄峰</h2><h2 id="QING-LUFENG"><a href="#QING-LUFENG" class="headerlink" title="QING LUFENG"></a>QING LUFENG</h2><h4 id="学生"><a href="#学生" class="headerlink" title="学生"></a>学生</h4><p>2005年5月出生于湖南邵阳，现居广东清远，嵌入式技术应用专业在校学生。</p>
<p>阿瓦隆科技工作室（The Studio of Avalon of Science and Technology）创始人和主要负责人。</p>
<p>HAM，设立有个人业余无线电台BA7KTB，拥有A类业余无线电台操作资质，电台台址位于清远清城。<br>天文爱好者，拥有一台102毫米折射式望远镜和一台50毫米双筒望远镜，天文观测站站址位于邵阳北塔。<br>波段交易者，正在构建一套自己的证券交易理论体系。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">志之所趋无远弗届，犯其至难图其致远</span><br></pre></td></tr></table></figure>

<p>我喜欢在旅途中增长自己的视野，了解和体验不同的文化与民俗，感受独特地理环境下塑造的多样生活方式，品味广阔世界各具特色的美食。<br>我希望在短暂的生命里认识、感受、领略和体会这颗蓝色星球上的壮阔、美好、危险和挑战。</p>
<p>欢迎你访问我的个人博客！<br>这对我来说是一扇面向全世界互联网用户展示自我的窗口，你可以使用任意一台接入互联网的设备打开此网站。</p>
]]></content>
      <categories>
        <category>About</category>
      </categories>
      <tags>
        <tag>About</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2025/03/15/hello-world/</url>
    <content><![CDATA[<p>Welcome to this blog by LuhillTsing . This is the first article published on this website .<br>欢迎来到 Luhill Tsing 开发的博客，这是在此网站发布的第一篇文章。<br>我想，这个网站将成为见证我技术进步的承载体，记录我在互联网开发过程里的尝试。<br>这是一个新奇的事物，说来有趣，我也是前几天才注册Github，跟随论坛前辈的帖子完成的这个博客的建设。我相信，我会在这个论坛学到很多东西。<br>在这个网站上，我会分享生活的点滴，这将成为了解我的一扇窗户。<br>我会在这里分享我的研究成果，无论是我喜欢的天文、金融或者计算机。<br>“志之所趋无远弗届 犯其至难图其致远。”<br>希望你们喜欢这里。</p>
<p><img src="/images/01-xunjicar.png" alt="测试图片"><br>这是一张用来测试的图片，图中展示的是我正在开发的寻迹避障小车</p>
<p>我的电子邮箱：<a href="mailto:&#113;&#105;&#x6e;&#x67;&#x6c;&#117;&#x68;&#x69;&#x6c;&#108;&#64;&#x71;&#113;&#46;&#99;&#111;&#109;">qingluhill@qq.com</a><br><a href="mailto:&#113;&#x69;&#110;&#103;&#x6c;&#117;&#104;&#x69;&#108;&#108;&#64;&#x71;&#113;&#x2e;&#99;&#111;&#109;">Contact Me</a><br>欢迎你与我联系，分享有趣的事物。</p>
<p>这个网站的网址：luhilltsing.github.io<br><a href="https://luhilltsing.github.io/">My Blog</a></p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
      <categories>
        <category>Computer</category>
      </categories>
      <tags>
        <tag>Computer</tag>
      </tags>
  </entry>
  <entry>
    <title>寻迹避障及定距离跟随小车</title>
    <url>/2025/03/18/XunjiCar/</url>
    <content><![CDATA[<p>本项目是课程《嵌入式综合实训》实训项目，小车基于意法半导体STM32F103C8T6主控芯片模块化设计开发，集成稳压模块、传感器模块（寻迹模块、避障模块、姿态传感器）、通信模块（蓝牙模块、WIFI模块）等模块，全周期设计制作测试，由本人与李华文同学合作完成，本人担任项目负责人。</p>
<p><img src="/images/02-Renderings-frontage-2D.png" alt="2D正面预览效果"></p>
<h1 id="一、设计要求"><a href="#一、设计要求" class="headerlink" title="一、设计要求"></a>一、设计要求</h1><h2 id="1-1-功能要求"><a href="#1-1-功能要求" class="headerlink" title="1.1 功能要求"></a>1.1 功能要求</h2><p>设计并制作一个基于STM32F103C8T6核心板的智能小车，具备自动寻迹、避障和无线控制功能。小车应能够沿着不规则的黑色轨迹行驶，遇到障碍物时能够自动绕行，并可通过蓝牙模块进行无线控制。<br>自动寻迹：小车应能够沿着不规则的黑色轨迹行驶，根据五路灰度循迹模块的反馈调整方向。<br>自动避障：小车在检测到前方障碍物时，应能够自动绕行，并重新回到轨迹上。<br>无线控制：小车应能够通过蓝牙模块接收无线控制信号，实现启动、停止、转向等操作。<br>状态显示：通过OLED屏幕显示小车的实时状态，包括速度、电池电量、障碍物距离等。<br>声光报警：小车在遇到障碍物或电池电量低时，应能够通过蜂鸣器和LED灯发出声光报警。</p>
<h2 id="1-2-赛道设计"><a href="#1-2-赛道设计" class="headerlink" title="1.2 赛道设计"></a>1.2 赛道设计</h2><p>[空]</p>
<h1 id="二、设计思路"><a href="#二、设计思路" class="headerlink" title="二、设计思路"></a>二、设计思路</h1><h2 id="2-1-设计思路"><a href="#2-1-设计思路" class="headerlink" title="2.1 设计思路"></a>2.1 设计思路</h2><p>首先，明确智能小车的功能需求，包括自动寻迹、避障、无线控制、状态显示和声光报警。选用STM32F103C8T6核心板作为主控单元，利用其强大的处理能力和丰富的外设接口来管理整个系统。选择L298N电机驱动模块来控制小车的两个TT电机，实现前进、后退和转向功能。五路灰度循迹模块用于检测黑色轨迹，提供实时路径信息给主控板。超声波模块用于测量前方障碍物的距离，实现自动避障功能。</p>
<p>蓝牙模块用于实现无线控制，用户可以通过手机或遥控器发送指令来控制小车的启动、停止和转向等操作。电源转换模块将9V电池电压转换为适合STM32F103C8T6核心板和其他低压组件的电压，确保系统供电稳定。OLED屏幕用于实时显示小车的状态信息，如速度、电池电量和障碍物距离等。LED灯用于指示小车的工作状态，例如启动、停止和避障。蜂鸣器用于在遇到障碍物或电池电量低时发出声音报警。</p>
<p>具体实现时，首先编写路径跟踪算法，利用五路灰度循迹模块的数据实现精准的路径跟踪；其次编写避障算法，根据超声波模块的数据进行障碍物检测和绕行路径规划；然后实现无线控制接口，接收和解析蓝牙模块的数据，响应用户的控制命令；同时，编写状态监测和显示功能，通过OLED屏幕和LED灯实时显示小车的状态；最后实现电源管理，监测电池电量并在低电量时发出报警或自动关机。</p>
<p>通过多次测试和调试，确保小车在不同环境下能够稳定、准确地执行各项功能。整体设计思路以模块化、功能分离为原则，各个模块之间通过STM32F103C8T6核心板进行协调，实现智能小车的多功能、高可靠性运行。</p>
<p><img src="/images/03-Xunji-fun.png" alt="小车核心系统设计"></p>
<h2 id="2-2-硬件选择与理由"><a href="#2-2-硬件选择与理由" class="headerlink" title="2.2 硬件选择与理由"></a>2.2 硬件选择与理由</h2><ol>
<li>STM32F103C8T6核心板<br>STM32F103C8T6核心板具有强大的处理能力和丰富的外设接口，适合用作主控单元。它具备高性能的ARM Cortex-M3处理器，可以处理复杂的路径跟踪、避障和无线通信算法。此外，其低功耗特性有助于延长电池续航时间。</li>
</ol>
<p>引脚定义</p>
<ol start="2">
<li><p>L298N电机驱动：<br>L298N电机驱动模块是一款高效、可靠的双H桥电机驱动模块，能够控制两台TT电机的前进、后退和转向。其设计简单、易于集成，非常适合用于小型智能小车的电机控制。</p>
</li>
<li><p>灰度循迹模块：<br>五路灰度循迹模块能够同时检测五个点的灰度值，从而准确识别黑色轨迹。这为小车的路径跟踪提供了精确的输入数据，有助于实现平稳和准确的自动寻迹。</p>
</li>
<li><p>带电机轮子的小车底盘（自带TT电机）：<br> 带电机轮子的小车底盘提供了小车的机械结构，包含两个TT电机和轮子，构造坚固，能够承载所有电子元件。其设计紧凑，易于安装电机和传感器，适合实现小车的移动控制。</p>
</li>
<li><p>9V供电电池：<br>9V供电电池提供了稳定且充足的电源，支持小车的长时间运行。其高电压可以通过电源转换模块转换为适合各种电子元件的工作电压。</p>
</li>
<li><p>蓝牙模块：<br>蓝牙模块用于实现无线控制，允许用户通过手机或遥控器发送指令。蓝牙通信方式使用方便、成本低、通信距离适中，非常适合用于小型智能设备的无线控制。</p>
</li>
<li><p>超声波模块：<br>超声波模块用于检测前方障碍物的距离，提供实时的测距信息。其测量精度高、反应速度快，对实现自动避障功能非常重要。<br>(1)采用IO触发测距，给至少10us的高电平信号,实际40-50uS效果好。<br>(2)模块自动发送8个40khz的方波。<br>(3)有信号返回，通过IO输出一高电平，高电平持续的时间就是超声波从发射到返回的时间。<br>(4)测试距离&#x3D;(高电平时间*声速(340M&#x2F;S))&#x2F;2。<br>(5)有2厘米测距盲区。</p>
</li>
<li><p>电源转换模块：<br>电源转换模块将9V电池电压转换为STM32F103C8T6核心板和其他低压组件所需的电压，确保系统供电稳定。其高效的电压转换能力有助于延长电池的使用时间。</p>
</li>
<li><p>OLED屏幕:<br>OLED屏幕用于实时显示小车的状态信息，如速度、电池电量和障碍物距离。OLED屏幕具有高对比度、低功耗和广视角的特点，适合在小型智能设备上进行信息显示。</p>
</li>
<li><p>LED灯:<br>LED灯用于指示小车的工作状态，如启动、停止和避障。LED灯响应迅速、功耗低、亮度高，适合作为状态指示器。</p>
</li>
<li><p>蜂鸣器:<br> 蜂鸣器用于在遇到障碍物或电池电量低时发出声音报警。其体积小、声音大、反应迅速，适合作为报警装置。</p>
</li>
</ol>
<h2 id="2-3-软件算法选择"><a href="#2-3-软件算法选择" class="headerlink" title="2.3 软件算法选择"></a>2.3 软件算法选择</h2><p>[空]</p>
<h1 id="三、PCB设计与小车组装"><a href="#三、PCB设计与小车组装" class="headerlink" title="三、PCB设计与小车组装"></a>三、PCB设计与小车组装</h1><h2 id="3-1-电路原理图"><a href="#3-1-电路原理图" class="headerlink" title="3.1 电路原理图"></a>3.1 电路原理图</h2><p><img src="/images/04-XunjiCar-Schematic1.0fpcbg.png" alt="图3-1 电路图设计"><br>电路图设计</p>
<h2 id="3-2-pcb布线："><a href="#3-2-pcb布线：" class="headerlink" title="3.2 pcb布线："></a>3.2 pcb布线：</h2><p><img src="/images/05-XunjiCar-pcbwiring.png" alt="3-1 PCB原理图设计"><br>PCB原理图设</p>
<p>本项目使用立创EDA绘制原理图。添加元件STM32F103C8T6核心板连接电源、地和所有需要的外设引脚。L298N电机驱动连接到TT电机和STM32F103C8T6的PWM控制引脚。五路灰度循迹模块连接到STM32F103C8T6的ADC输入或GPIO。9V供电电池:连接到电源转换模块。电源转换模块 输出为STM32F103C8T6核心板和其他低压组件供电。</p>
<p>蓝牙模块:连接到STM32F103C8T6的UART引脚。超声波模块连接到STM32F103C8T6的GPIO。OLED屏幕连接到STM32F103C8T6的I2C或SPI引脚。LED灯连接到STM32F103C8T6的GPIO。蜂鸣器连接到STM32F103C8T6的GPIO。</p>
<p>将所有元件按照设计要求连接，确保电源、地和信号线都连接正确。添加去耦电容（如0.1μF和10μF），尽量靠近STM32F103C8T6核心板的电源引脚，以减少电源噪声。</p>
<p>元件布局STM32F103C8T6核心放在PCB的中心位置，便于连接外设。L298N电机驱动接近电机，减少电机电源线路的长度。五路灰度循迹模块放在小车前部，确保能够检测路径。</p>
<p>电源转换放在靠近电池的位置，减少高电压线路长度。蓝牙模块放在远离电源和电机的位置，减少电磁干扰。超声波模块安装在小车前方。OLED屏幕安装在方便查看的位置。LED灯和蜂鸣器放置在合理的可见和听到的位置。</p>
<p>使用较宽的走线（如50 mil或更宽）进行电源和地线的布线，确保充足的电流容量。创建一个地平面（Ground Plane），减少电源噪声。尽量使用较短的信号线，减少信号延迟和干扰。对高速信号（如I2C、SPI和PWM）的布线要特别注意，避免交叉走线和长距离的平行走线，减少干扰。添加过孔（Via）将电源和信号线引导到适当的层。</p>
<p>使用立创EDA的DRC功能检查所有的布线规则，包括最小走线宽度、走线间距、过孔尺寸等，确保设计没有违反规则。生成Gerber文件：包括顶层铜箔、底层铜箔、丝印层、阻焊层、钻孔文件等。生成BOM（物料清单）：列出所有元件的规格和数量。交付嘉立创打板制作。</p>
<h2 id="3-3-实物焊接"><a href="#3-3-实物焊接" class="headerlink" title="3.3 实物焊接"></a>3.3 实物焊接</h2><p>焊接稳压模块时，由于模块连接较近，容易将附件的焊锡粘连。可以采用事先融化一些焊锡在焊枪上，再轻轻接触原件。<br>焊接较小贴片时，也可以采取上述方案，先将一个引脚覆盖少量焊锡，再将原件用镊子固定，用高温焊枪融化焊盘上的覆锡，固定一边引脚后，再固定另一边。<br><img src="/images/06-XunjiCar-Weld1.jpg" alt="3-3 焊接成品"> </p>
<h1 id="四、软件底层设计"><a href="#四、软件底层设计" class="headerlink" title="四、软件底层设计"></a>四、软件底层设计</h1><h3 id="4-1-宏定义"><a href="#4-1-宏定义" class="headerlink" title="4.1 宏定义"></a>4.1 宏定义</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#define AIN1_H HAL_GPIO_WritePin(GPIOB,GPIO_PIN_13,GPIO_PIN_SET)</span></span><br><span class="line"><span class="comment">#define AIN1_L HAL_GPIO_WritePin(GPIOB,GPIO_PIN_13,GPIO_PIN_RESET)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#define AIN2_H HAL_GPIO_WritePin(GPIOB,GPIO_PIN_12,GPIO_PIN_SET)</span></span><br><span class="line"><span class="comment">#define AIN2_L HAL_GPIO_WritePin(GPIOB,GPIO_PIN_12,GPIO_PIN_RESET)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#define BIN1_H HAL_GPIO_WritePin(GPIOB,GPIO_PIN_1,GPIO_PIN_SET)</span></span><br><span class="line"><span class="comment">#define BIN1_L HAL_GPIO_WritePin(GPIOB,GPIO_PIN_1,GPIO_PIN_RESET)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#define BIN2_H HAL_GPIO_WritePin(GPIOB,GPIO_PIN_0,GPIO_PIN_SET)</span></span><br><span class="line"><span class="comment">#define BIN2_L HAL_GPIO_WritePin(GPIOB,GPIO_PIN_0,GPIO_PIN_RESET)</span></span><br></pre></td></tr></table></figure>

<h3 id="4-2-让小车动起来"><a href="#4-2-让小车动起来" class="headerlink" title="4.2 让小车动起来"></a>4.2 让小车动起来</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">car_forward();</span><br><span class="line">HAL_Delay(2000);  // 前进 2 秒</span><br><span class="line">HAL_TIM_PWM_Start(&amp;htim1, TIM_CHANNEL_1);</span><br><span class="line">HAL_TIM_PWM_Start(&amp;htim1, TIM_CHANNEL_4);</span><br><span class="line"></span><br><span class="line">car_stop();</span><br><span class="line">HAL_Delay(100);</span><br><span class="line"></span><br><span class="line">car_backward();</span><br><span class="line">HAL_Delay(2000);  // 后退 2 秒</span><br><span class="line">HAL_TIM_PWM_Start(&amp;htim1, TIM_CHANNEL_1);</span><br><span class="line">HAL_TIM_PWM_Start(&amp;htim1, TIM_CHANNEL_4);</span><br><span class="line"></span><br><span class="line">car_stop();</span><br><span class="line">HAL_Delay(100);</span><br><span class="line"></span><br><span class="line">car_turn_left();</span><br><span class="line">HAL_Delay(2000);  // 左转 2 秒</span><br><span class="line">HAL_TIM_PWM_Start(&amp;htim1, TIM_CHANNEL_1);</span><br><span class="line">HAL_TIM_PWM_Start(&amp;htim1, TIM_CHANNEL_4);</span><br><span class="line"></span><br><span class="line">car_stop();</span><br><span class="line">HAL_Delay(100);</span><br><span class="line"></span><br><span class="line">car_turn_right();</span><br><span class="line">HAL_Delay(2000);  // 右转 2 秒</span><br><span class="line">HAL_TIM_PWM_Start(&amp;htim1, TIM_CHANNEL_1);</span><br><span class="line">HAL_TIM_PWM_Start(&amp;htim1, TIM_CHANNEL_4);</span><br><span class="line"></span><br><span class="line">car_stop();</span><br><span class="line">HAL_Delay(100);</span><br></pre></td></tr></table></figure>

<p>本网站还没有安装视频播放插件，暂时无法演示。</p>
<h2 id="4-98-避障思路"><a href="#4-98-避障思路" class="headerlink" title="4.98 避障思路:"></a>4.98 避障思路:</h2><h2 id="4-97-循迹程序设计"><a href="#4-97-循迹程序设计" class="headerlink" title="4.97 循迹程序设计"></a>4.97 循迹程序设计</h2><h2 id="4-96-跟随程序设计"><a href="#4-96-跟随程序设计" class="headerlink" title="4.96 跟随程序设计"></a>4.96 跟随程序设计</h2><h2 id="4-95-蓝牙遥控程序设计"><a href="#4-95-蓝牙遥控程序设计" class="headerlink" title="4.95 蓝牙遥控程序设计"></a>4.95 蓝牙遥控程序设计</h2><h1 id="五、底层代码实现"><a href="#五、底层代码实现" class="headerlink" title="五、底层代码实现"></a>五、底层代码实现</h1><h1 id="六、测试"><a href="#六、测试" class="headerlink" title="六、测试"></a>六、测试</h1><h2 id="6-1-避障测试"><a href="#6-1-避障测试" class="headerlink" title="6.1 避障测试"></a>6.1 避障测试</h2><h2 id="6-2-寻迹测试"><a href="#6-2-寻迹测试" class="headerlink" title="6.2 寻迹测试"></a>6.2 寻迹测试</h2><p>参考资料：<br>[1] 妄北y. 基于STM32F103C8T6的智能小车设计：自动寻迹、避障与无线控制全解析 [EB&#x2F;OL]. CSDN博客, 2025-01-13. <a href="https://blog.csdn.net/qq_62634009/article/details/145074327">https://blog.csdn.net/qq_62634009/article/details/145074327</a>.</p>
<p>最后更新日期：2025-03-29</p>
]]></content>
      <categories>
        <category>Projects</category>
      </categories>
      <tags>
        <tag>Projects</tag>
      </tags>
  </entry>
</search>
